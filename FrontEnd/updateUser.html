<!DOCTYPE html>
<html>
<head>
	<title>User Management</title>
	
</head>
<body>

	
	<h1>Update User Details</h1>
	<button onclick="window.location.href='UserManagement.html';">
      Back
    </button>
	<button onclick="window.location.href='HomePage.html';">
      Home
    </button><br><br>
	<form>
		<label>UserID:</label>
		<input type="text" id="userid" name="userid"><br><br>
		<label>Name:</label>
		<input type="text" id="name" name="name"><br><br>
		<label>Email:</label>
		<input type="email" id="email" name="email"><br><br>
		<label>Password:</label>
		<input type="password" id="password" name="password"><br><br>
		<label>Role:</label>
		<select id="role" name="role">
			<option value=""></option>
			<option value="student">Student</option>
			<option value="faculty">Faculty</option>
			<option value="admin">Admin</option>
		</select><br><br>
		<input type="button" value="submit" onclick="updateUser()">
	</form>
	
	<br><br>
	
	<script>
	function updateUser() {
		var xhr = new XMLHttpRequest();
		xhr.onreadystatechange = function() {
			if (xhr.readyState === XMLHttpRequest.DONE) {
			
				var response = JSON.parse(this.responseText);
				if (xhr.status === 200) {
				alert("User details updated for userID: " + response.data.user_id);
				
			}
			else {
						alert("failed: " + response.control.errorCode + ":" + response.control.errorMsg);
					}
			
		};
		}
		
		xhr.open("POST", "http://localhost:9766/api/v1/userManagement/updateUser", true);
		//xhr.setRequestHeader("Content-Type", "application/json");
		xhr.send(JSON.stringify({
			"user_id": document.getElementById("userid").value,
			"name": document.getElementById("name").value,
			"email": document.getElementById("email").value,
			"password": document.getElementById("password").value,
			"role": document.getElementById("role").value
		}));
		}
	</script>
</body>
</html>
